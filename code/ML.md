flowchart TD
    A[データ収集開始] --> B[Spotify APIから曲と特徴を取得]
    B --> C{データは完全か?}
    C -->|いいえ| D[データ修正や補完]
    C -->|はい| E[お気に入りのプレイリストの特徴を平均化]
    E --> F[推薦プレイリストの特徴を平均化]
    F --> G[ランダムフォレスト回帰モデルの訓練]
    G --> H{モデルは適切に機能しているか?}
    H -->|いいえ| I[パラメータ調整と再訓練]
    H -->|はい| J[プレイリストの特徴に基づくランキング計算]
    J --> K[特徴が一致する上位プレイリストの選定]
    K --> L[選定プレイリストから曲の変動を計算]
    L --> M[変動が最も少ないトップ50曲を選択]
    M --> N[新しいプレイリストに曲を追加]
    N --> O[Spotifyにプレイリストを作成]
    O --> P{プレイリストの確認と評価}
    P -->|不満足| Q[フィードバックに基づく調整]
    P -->|満足| R[プロセス完了とプレイリストの公開]
    Q --> N
    I --> G
    D --> B
